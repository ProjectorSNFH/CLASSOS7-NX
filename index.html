<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CLASS(OS) 7 - LOGIN SERVER</title>
<style>
        :root {
            --bg-color: #000000;
            --dot-color: rgba(255, 255, 255, 0.219);
            --text-online: #ffffff;
            --text-offline: #dba9a7;
        }

        body {
            margin: 0; padding: 0;
            background-color: var(--bg-color);
            width: 100%; height: 100vh;
            overflow: hidden;
            display: flex; justify-content: center; align-items: center;
            font-family: 'JetBrains Mono', monospace;
        }

        /* 낫싱 스타일 도트 배경 */
        .dot-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: radial-gradient(var(--dot-color) 1px, transparent 0);
            background-size: 24px 24px; z-index: 1;
        }

        /* [복구] 기존 프론트엔드 눈 효과 코드 그대로 적용 */
        .snow-layer {
            content: "";
            position: fixed;
            top: -100%;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 9999;
            background-image: 
                radial-gradient(4px 4px at 20px 30px, #fff, rgba(255,255,255,0)),
                radial-gradient(3px 3px at 50px 70px, #fff, rgba(255,255,255,0)),
                radial-gradient(5px 5px at 90px 40px, #fff, rgba(255,255,255,0)),
                radial-gradient(4px 4px at 150px 120px, #fff, rgba(255,255,255,0)),
                radial-gradient(3px 3px at 200px 80px, #fff, rgba(255,255,255,0));
            background-size: 300px 300px;
            animation: snowFallAnim 10s linear infinite;
            opacity: 0.6;
        }

        /* 입체감을 위한 두 번째 레이어 (애니메이션 속도만 다르게) */
        .snow-layer.secondary {
            animation-duration: 15s;
            opacity: 0.3;
        }

        @keyframes snowFallAnim {
            from { transform: translateY(0); }
            to { transform: translateY(100%); }
        }

        /* 중앙 상태 텍스트 */
        #statusText {
            position: relative;
            z-index: 10000; /* 눈보다 앞에 오도록 설정 */
            font-size: 1.5rem;
            letter-spacing: 4px;
            font-weight: 800;
            transition: all 0.5s ease;
        }

        .online { color: var(--text-online); text-shadow: 0 0 15px rgba(0, 255, 0, 0.5); }
        .offline { color: var(--text-offline); text-shadow: 0 0 15px rgba(255, 59, 48, 0.5); }
    </style>
</head>
<body>
    <div class="dot-overlay"></div>
    <div class="snow-layer one"></div>
    <div class="snow-layer two"></div>

    <div id="statusText" class="online">LOADING...</div>

    <script>
        const statusText = document.getElementById('statusText');

        async function updateStatus() {
            try {
                // Koyeb 서버의 /test 엔드포인트 호출
                const res = await fetch('/test');
                const data = await res.json();

                if (data.connection === 1) {
                    statusText.innerText = "SYSTEM ONLINE";
                    statusText.className = "online";
                } else {
                    statusText.innerText = "SYSTEM OFFLINE";
                    statusText.className = "offline";
                }
            } catch (err) {
                statusText.innerText = "SERVER ERROR";
                statusText.className = "offline";
            }
        }

        // 3초마다 서버 상태 체크
        setInterval(updateStatus, 3000);
        updateStatus(); // 첫 로드 시 즉시 실행
    </script>
</body>
</html>