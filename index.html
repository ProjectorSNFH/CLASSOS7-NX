<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CLASS(OS) 7 - LOGIN SERVER</title>
    <style>
        :root {
            --bg-color: #000000;
            --dot-color: rgba(255, 255, 255, 0.219);
            --snow-color: rgba(255, 255, 255, 0.8);
            --text-online: #00ff00; /* 온라인: 초록색 */
            --text-offline: #ff3b30; /* 오프라인: 빨간색 */
        }

        body {
            margin: 0; padding: 0;
            background-color: var(--bg-color);
            width: 100%; height: 100vh;
            overflow: hidden;
            display: flex; justify-content: center; align-items: center;
            font-family: 'JetBrains Mono', monospace;
        }

        /* 낫싱 스타일 도트 배경 */
        .dot-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: radial-gradient(var(--dot-color) 1px, transparent 0);
            background-size: 24px 24px; z-index: 1;
        }

        /* 눈 내리는 효과 */
        .snow-layer {
            position: fixed; top: -100%; left: 0; right: 0; bottom: 0;
            pointer-events: none; z-index: 2;
        }
        .snow-layer.one {
            background-image: 
                radial-gradient(3px 3px at 20px 30px, var(--snow-color), transparent),
                radial-gradient(4px 4px at 150px 120px, var(--snow-color), transparent);
            background-size: 320px 320px;
            animation: snowFallAnim 12s linear infinite;
        }
        .snow-layer.two {
            background-image: 
                radial-gradient(5px 5px at 10px 10px, var(--snow-color), transparent),
                radial-gradient(100px 150px at 100px 150px, var(--snow-color), transparent);
            background-size: 450px 450px;
            animation: snowFallAnim 18s linear infinite;
            opacity: 0.4;
        }

        @keyframes snowFallAnim {
            from { transform: translateY(0); }
            to { transform: translateY(100%); }
        }

        /* 중앙 상태 텍스트 */
        #statusText {
            position: relative;
            z-index: 10;
            font-size: 1.5rem;
            letter-spacing: 4px;
            font-weight: 800;
            transition: all 0.5s ease;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
        }

        .online { color: var(--text-online); }
        .offline { color: var(--text-offline); }
    </style>
</head>
<body>
    <div class="dot-overlay"></div>
    <div class="snow-layer one"></div>
    <div class="snow-layer two"></div>

    <div id="statusText" class="online">LOADING...</div>

    <script>
        const statusText = document.getElementById('statusText');

        async function updateStatus() {
            try {
                // Koyeb 서버의 /test 엔드포인트 호출
                const res = await fetch('/test');
                const data = await res.json();

                if (data.connection === 1) {
                    statusText.innerText = "SYSTEM ONLINE";
                    statusText.className = "online";
                } else {
                    statusText.innerText = "SYSTEM OFFLINE";
                    statusText.className = "offline";
                }
            } catch (err) {
                statusText.innerText = "SERVER ERROR";
                statusText.className = "offline";
            }
        }

        // 3초마다 서버 상태 체크
        setInterval(updateStatus, 3000);
        updateStatus(); // 첫 로드 시 즉시 실행
    </script>
</body>
</html>